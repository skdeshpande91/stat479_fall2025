<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>STAT 479 Lecture 1 – STAT479</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-4bfb630b09c0e164834af1bb3207dbff.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">STAT479</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lecture-code" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lecture Code</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lecture-code">    
        <li>
    <a class="dropdown-item" href="../../lectures/lecture00.html">
 <span class="dropdown-text">Lecture 0: Boxscore Metrics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture02.html">
 <span class="dropdown-text">Lecture 2: Expected Goals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture03.html">
 <span class="dropdown-text">Lecture 3: Estimating XG</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture04.html">
 <span class="dropdown-text">Lecture 4: Adjusted Plus/Minus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture05.html">
 <span class="dropdown-text">Lecture 5: Regularized Adjusted Plus/Minus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture06.html">
 <span class="dropdown-text">Lecture 6: Run Expectancy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture07.html">
 <span class="dropdown-text">Lecture 7: Offensive Credit Allocation in Baseball</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture08.html">
 <span class="dropdown-text">Lecture 8: Defensive Credit Allocation in Baseball</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture09.html">
 <span class="dropdown-text">Lecture 9: Multilevel Modeling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture10.html">
 <span class="dropdown-text">Lecture 10: NFl WAR</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture11.html">
 <span class="dropdown-text">Lecture 11: Pitch Framing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture12.html">
 <span class="dropdown-text">Lecture 12: Power Rankings I</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../lectures/lecture13.html">
 <span class="dropdown-text">Lecture 13: Power Rankings II</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lecture-slides" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lecture Slides</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lecture-slides">    
        <li>
    <a class="dropdown-item" href="../../slides/lecture01.html">
 <span class="dropdown-text">Lecture 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../slides/lecture02.html">
 <span class="dropdown-text">Lecture 2: Expected Goals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../slides/lecture03.html">
 <span class="dropdown-text">Lecture 3: Estimating XG</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../slides/lecture04.html">
 <span class="dropdown-text">Lecture 4: Adjusted Plus/Minus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../slides/lecture05.html">
 <span class="dropdown-text">Lecture 5: Regularized Adjusted Plus/Minus</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../slides/lecture06.html">
 <span class="dropdown-text">Lecture 6: Expected Runs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../slides/lecture08.html">
 <span class="dropdown-text">Lecture 8: Defensive Credit Allocation &amp; WAR</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#logistics" id="toc-logistics" class="nav-link active" data-scroll-target="#logistics">Logistics</a>
  <ul class="collapse">
  <li><a href="#lectures-office-hours" id="toc-lectures-office-hours" class="nav-link" data-scroll-target="#lectures-office-hours">Lectures &amp; Office Hours</a></li>
  <li><a href="#what-this-course-is-not" id="toc-what-this-course-is-not" class="nav-link" data-scroll-target="#what-this-course-is-not">What This Course is NOT</a></li>
  <li><a href="#course-learning-outcomes" id="toc-course-learning-outcomes" class="nav-link" data-scroll-target="#course-learning-outcomes">Course Learning Outcomes</a></li>
  </ul></li>
  <li><a href="#what-is-sports-analytics" id="toc-what-is-sports-analytics" class="nav-link" data-scroll-target="#what-is-sports-analytics">What is Sports Analytics?</a>
  <ul class="collapse">
  <li><a href="#statistics-vs-analytics" id="toc-statistics-vs-analytics" class="nav-link" data-scroll-target="#statistics-vs-analytics">Statistics vs Analytics</a></li>
  <li><a href="#bestnba-shooting-performances" id="toc-bestnba-shooting-performances" class="nav-link" data-scroll-target="#bestnba-shooting-performances">“Best”NBA Shooting Performances</a></li>
  <li><a href="#data-snapshot" id="toc-data-snapshot" class="nav-link" data-scroll-target="#data-snapshot">Data Snapshot</a></li>
  <li><a href="#extract-regular-season-data" id="toc-extract-regular-season-data" class="nav-link" data-scroll-target="#extract-regular-season-data">Extract Regular Season Data</a></li>
  <li><a href="#preprocessing" id="toc-preprocessing" class="nav-link" data-scroll-target="#preprocessing">Preprocessing</a></li>
  <li><a href="#season-totals" id="toc-season-totals" class="nav-link" data-scroll-target="#season-totals">Season Totals</a></li>
  <li><a href="#who-made-the-most-shots" id="toc-who-made-the-most-shots" class="nav-link" data-scroll-target="#who-made-the-most-shots">Who Made the Most Shots?</a></li>
  <li><a href="#field-goal-percentage" id="toc-field-goal-percentage" class="nav-link" data-scroll-target="#field-goal-percentage">Field Goal Percentage</a></li>
  <li><a href="#effective-field-goal-percentage" id="toc-effective-field-goal-percentage" class="nav-link" data-scroll-target="#effective-field-goal-percentage">Effective Field Goal Percentage</a></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection">Reflection</a></li>
  </ul></li>
  <li><a href="#more-course-logistics" id="toc-more-course-logistics" class="nav-link" data-scroll-target="#more-course-logistics">More Course Logistics</a>
  <ul class="collapse">
  <li><a href="#requisites" id="toc-requisites" class="nav-link" data-scroll-target="#requisites">Requisites</a></li>
  <li><a href="#course-website" id="toc-course-website" class="nav-link" data-scroll-target="#course-website">Course Website</a></li>
  <li><a href="#assignments-grading" id="toc-assignments-grading" class="nav-link" data-scroll-target="#assignments-grading">Assignments &amp; Grading</a></li>
  <li><a href="#projects" id="toc-projects" class="nav-link" data-scroll-target="#projects">Projects</a></li>
  <li><a href="#project-report" id="toc-project-report" class="nav-link" data-scroll-target="#project-report">Project Report</a></li>
  <li><a href="#project-presentation" id="toc-project-presentation" class="nav-link" data-scroll-target="#project-presentation">Project Presentation</a></li>
  <li><a href="#project-peer-review" id="toc-project-peer-review" class="nav-link" data-scroll-target="#project-peer-review">Project Peer Review</a></li>
  <li><a href="#team-accountability-survey" id="toc-team-accountability-survey" class="nav-link" data-scroll-target="#team-accountability-survey">Team Accountability Survey</a></li>
  </ul></li>
  <li><a href="#topic-list" id="toc-topic-list" class="nav-link" data-scroll-target="#topic-list">Topic List</a>
  <ul class="collapse">
  <li><a href="#unit-1-quantifying-performances" id="toc-unit-1-quantifying-performances" class="nav-link" data-scroll-target="#unit-1-quantifying-performances">Unit 1: Quantifying Performances</a></li>
  <li><a href="#project-1" id="toc-project-1" class="nav-link" data-scroll-target="#project-1">Project 1</a></li>
  <li><a href="#unit-2-rankings-simulation" id="toc-unit-2-rankings-simulation" class="nav-link" data-scroll-target="#unit-2-rankings-simulation">Unit 2: Rankings &amp; Simulation</a></li>
  <li><a href="#project-2" id="toc-project-2" class="nav-link" data-scroll-target="#project-2">Project 2</a></li>
  <li><a href="#unit-3-tracking-data" id="toc-unit-3-tracking-data" class="nav-link" data-scroll-target="#unit-3-tracking-data">Unit 3: Tracking Data</a></li>
  <li><a href="#project-3" id="toc-project-3" class="nav-link" data-scroll-target="#project-3">Project 3</a></li>
  </ul></li>
  <li><a href="#final-reminders" id="toc-final-reminders" class="nav-link" data-scroll-target="#final-reminders">Final Reminders</a>
  <ul class="collapse">
  <li><a href="#course-expectations" id="toc-course-expectations" class="nav-link" data-scroll-target="#course-expectations">Course Expectations</a></li>
  <li><a href="#generative-ai-expectations-1" id="toc-generative-ai-expectations-1" class="nav-link" data-scroll-target="#generative-ai-expectations-1">Generative AI Expectations 1</a></li>
  <li><a href="#generative-ai-expectations-2" id="toc-generative-ai-expectations-2" class="nav-link" data-scroll-target="#generative-ai-expectations-2">Generative AI Expectations 2</a></li>
  <li><a href="#looking-ahead" id="toc-looking-ahead" class="nav-link" data-scroll-target="#looking-ahead">Looking Ahead</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="slides_01.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">STAT 479 Lecture 1</h1>
<p class="subtitle lead">Course Overview</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="logistics" class="level1">
<h1>Logistics</h1>
<section id="lectures-office-hours" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="lectures-office-hours">Lectures &amp; Office Hours</h2>
<ul>
<li>Lectures: Tuesdays &amp; Thursday 11am-12:15pm (Morgridge Hall 1524)</li>
<li>Instructor: Sameer Deshpande
<ul>
<li>Mondays: 11am - 12pm (Morgridge Hall 5586)</li>
<li>Wednesdays: 3pm - 4pm (Morgridge Hall 5586)</li>
<li>Fridays: 3pm - 4:30pm (Morgridge Hall 5618)</li>
</ul></li>
<li>TA: Zhexuan Liu
<ul>
<li>Tuesdays &amp; Thursdays 9:15am-10:45am (Morgridge Hall 2515)</li>
</ul></li>
</ul>
</section>
<section id="what-this-course-is-not" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="what-this-course-is-not">What This Course is NOT</h2>
<ul>
<li><strong>NOT</strong> a statistical methods course w/ sports applications</li>
<li>Methods introduced <em>as needed</em>
<ul>
<li>But will not cover all technical details</li>
<li>I’ll point to relevant resources &amp; classes where relevant</li>
<li>Main goal: answering substantive sports questions</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li><strong>NOT</strong> a course on sports betting or fantasy sports
<ul>
<li>Some material may be relevant …</li>
<li>… but we won’t explicitly discuss these topics</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li><strong>NOT</strong> a way to discuss last night’s game for credit
<ul>
<li>This is a serious statistics &amp; data science course</li>
</ul></li>
<li>Goal: <strong>practice</strong> skills needed to work w/ sports data (e.g.&nbsp;for a team)
<ul>
<li>Course design reflects input from leaders in the industry</li>
</ul></li>
</ul>
</section>
<section id="course-learning-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="course-learning-outcomes">Course Learning Outcomes</h2>
<div class="fragment">
<ol type="1">
<li>Implement appropriate statistical methods to assess player and team performance</li>
<li>Work with play-by-play and high-resolution tracking data</li>
<li>Provide constructive and actionable feedback on your peers’ analytic reports</li>
<li>Build a personal portfolio of sports data analyses</li>
</ol>
</div>
<div class="fragment">
<ul>
<li>Asking and answering <strong>substantive</strong> sports questions w/ data
<ul>
<li>We’ll go well beyond “who’s the best at…”</li>
</ul></li>
</ul>
</div>
</section>
</section>
<section id="what-is-sports-analytics" class="level1">
<h1>What is Sports Analytics?</h1>
<section id="statistics-vs-analytics" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="statistics-vs-analytics">Statistics vs Analytics</h2>
<ul>
<li>Sports statistics refer to counts and rates that <em>summarize</em> performance:
<ul>
<li>Number of rebounds, wins, games played</li>
<li>Free throw percentage, batting average</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li>Analytics refers to the use of statistical <em>modeling</em> to help gain competitive advantage</li>
<li>Analytics makes use of basic statistics &amp; creates new ones</li>
<li>Analytics uses data to answer <strong>substantive sports questions</strong></li>
<li>Many questions can framed in terms of prediction</li>
</ul>
</section>
<section id="bestnba-shooting-performances" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="bestnba-shooting-performances">“Best”NBA Shooting Performances</h2>
<ul>
<li>Who is the best shooter in NBA history?
<ul>
<li>What do we mean by “best”?</li>
<li>It’s not clear that this can be answered w/ data</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li>A more precise question: which player made the most shots in a single season?
<ul>
<li>Can be answered by data</li>
<li>We’ll assess whether “best” = “made most shots” is satisfactory later</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li>Data: box scores from each game since 2002-03</li>
<li>Available from the <strong>hoopR</strong> package</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>raw_box <span class="ot">&lt;-</span> hoopR<span class="sc">::</span><span class="fu">load_nba_player_box</span>(<span class="at">seasons =</span> <span class="dv">2002</span><span class="sc">:</span>(hoopR<span class="sc">::</span><span class="fu">most_recent_nba_season</span>()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-snapshot" class="level2">
<h2 class="anchored" data-anchor-id="data-snapshot">Data Snapshot</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Columns</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Single Game</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(raw_box)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "game_id"                           "season"                           
 [3] "season_type"                       "game_date"                        
 [5] "game_date_time"                    "athlete_id"                       
 [7] "athlete_display_name"              "team_id"                          
 [9] "team_name"                         "team_location"                    
[11] "team_short_display_name"           "minutes"                          
[13] "field_goals_made"                  "field_goals_attempted"            
[15] "three_point_field_goals_made"      "three_point_field_goals_attempted"
[17] "free_throws_made"                  "free_throws_attempted"            
[19] "offensive_rebounds"                "defensive_rebounds"               
[21] "rebounds"                          "assists"                          
[23] "steals"                            "blocks"                           
[25] "turnovers"                         "fouls"                            
[27] "plus_minus"                        "points"                           
[29] "starter"                           "ejected"                          
[31] "did_not_play"                      "active"                           
[33] "athlete_jersey"                    "athlete_short_name"               
[35] "athlete_headshot_href"             "athlete_position_name"            
[37] "athlete_position_abbreviation"     "team_display_name"                
[39] "team_uid"                          "team_slug"                        
[41] "team_logo"                         "team_abbreviation"                
[43] "team_color"                        "team_alternate_color"             
[45] "home_away"                         "team_winner"                      
[47] "team_score"                        "opponent_team_id"                 
[49] "opponent_team_name"                "opponent_team_location"           
[51] "opponent_team_display_name"        "opponent_team_abbreviation"       
[53] "opponent_team_logo"                "opponent_team_color"              
[55] "opponent_team_alternate_color"     "opponent_team_score"              
[57] "reason"                           </code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>raw_box <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(game_date <span class="sc">==</span> <span class="st">"2011-06-12"</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(athlete_display_name, </span>
<span id="cb4-3"><a href="#cb4-3"></a>         field_goals_made, field_goals_attempted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── ESPN NBA Player Boxscores from hoopR data repository ───────── hoopR 2.1.0 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Data updated: 2025-07-31 06:39:25 CDT</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 3
   athlete_display_name field_goals_made field_goals_attempted
   &lt;chr&gt;                           &lt;int&gt;                 &lt;int&gt;
 1 Dirk Nowitzki                       9                    27
 2 Tyson Chandler                      2                     4
 3 Jason Kidd                          2                     4
 4 Shawn Marion                        4                    10
 5 J.J. Barea                          7                    12
 6 Brian Cardinal                      1                     1
 7 Caron Butler                       NA                    NA
 8 Ian Mahinmi                         2                     3
 9 Rodrigue Beaubois                  NA                    NA
10 DeShawn Stevenson                   3                     5
# ℹ 20 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="extract-regular-season-data" class="level2">
<h2 class="anchored" data-anchor-id="extract-regular-season-data">Extract Regular Season Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>allstar_dates <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">date</span>(<span class="fu">c</span>(<span class="st">"2002-02-10"</span>, <span class="st">"2003-02-09"</span>, </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2004-02-15"</span>,<span class="st">"2005-02-20"</span>, <span class="st">"2006-02-19"</span>, <span class="st">"2007-02-18"</span>, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2008-02-17"</span>, <span class="st">"2009-02-15"</span>, <span class="st">"2010-02-14"</span>,<span class="st">"2011-02-20"</span>, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2012-02-26"</span>, <span class="st">"2013-02-17"</span>, <span class="st">"2014-02-16"</span>, <span class="st">"2015-02-15"</span>, </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2016-02-14"</span>,<span class="st">"2017-02-19"</span>, <span class="st">"2018-02-18"</span>, <span class="st">"2019-02-17"</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2020-02-16"</span>, <span class="st">"2021-03-07"</span>, <span class="st">"2022-02-20"</span>,<span class="st">"2023-02-19"</span>, </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2024-02-18"</span>, <span class="st">"2025-02-16"</span>))</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>reg_box <span class="ot">&lt;-</span> raw_box <span class="sc">|&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(season_type <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> <span class="sc">!</span>did_not_play <span class="sc">&amp;</span> <span class="sc">!</span>game_date <span class="sc">%in%</span> allstar_dates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="preprocessing" class="level2">
<h2 class="anchored" data-anchor-id="preprocessing">Preprocessing</h2>
<ul>
<li>Rename columns &amp; set defaults for players with no minutes</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>reg_box <span class="ot">&lt;-</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  reg_box <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(</span>
<span id="cb9-4"><a href="#cb9-4"></a>    <span class="at">Player =</span> athlete_display_name, </span>
<span id="cb9-5"><a href="#cb9-5"></a>    <span class="at">FGM =</span> field_goals_made, <span class="at">FGA =</span> field_goals_attempted,</span>
<span id="cb9-6"><a href="#cb9-6"></a>    <span class="at">TPM =</span> three_point_field_goals_made,<span class="at">TPA =</span> three_point_field_goals_attempted,</span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="at">FTM =</span> free_throws_made, <span class="at">FTA =</span> free_throws_attempted) <span class="sc">|&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb9-9"><a href="#cb9-9"></a>    <span class="at">FGM =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(minutes), <span class="dv">0</span>, FGM), <span class="at">FGA =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(minutes), <span class="dv">0</span>, FGA),</span>
<span id="cb9-10"><a href="#cb9-10"></a>    <span class="at">TPM =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(minutes), <span class="dv">0</span>, TPM),<span class="at">TPA =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(minutes), <span class="dv">0</span>, TPA),</span>
<span id="cb9-11"><a href="#cb9-11"></a>    <span class="at">FTM =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(minutes), <span class="dv">0</span>, FTM),<span class="at">FTA =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(minutes), <span class="dv">0</span>, FTA)) <span class="sc">|&gt;</span></span>
<span id="cb9-12"><a href="#cb9-12"></a>  tidyr<span class="sc">::</span><span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">minutes =</span> <span class="dv">0</span>))         </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="season-totals" class="level2">
<h2 class="anchored" data-anchor-id="season-totals">Season Totals</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>season_box <span class="ot">&lt;-</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>  reg_box <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(Player, season) <span class="sc">|&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">FGM =</span> <span class="fu">sum</span>(FGM),<span class="at">FGA =</span> <span class="fu">sum</span>(FGA),</span>
<span id="cb10-5"><a href="#cb10-5"></a>    <span class="at">TPM =</span> <span class="fu">sum</span>(TPM),<span class="at">TPA =</span> <span class="fu">sum</span>(TPA),<span class="at">FTM =</span> <span class="fu">sum</span>(FTM),<span class="at">FTA =</span> <span class="fu">sum</span>(FTA),</span>
<span id="cb10-6"><a href="#cb10-6"></a>    <span class="at">minutes =</span> <span class="fu">sum</span>(minutes), <span class="at">n_games =</span> dplyr<span class="sc">::</span><span class="fu">n</span>(),<span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb10-7"><a href="#cb10-7"></a>season_box <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(Player <span class="sc">==</span> <span class="st">"Dirk Nowitzki"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 10
   Player        season   FGM   FGA   TPM   TPA   FTM   FTA minutes n_games
   &lt;chr&gt;          &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;int&gt;
 1 Dirk Nowitzki   2002   600  1258   139   350   440   516    2891      76
 2 Dirk Nowitzki   2003   690  1489   148   390   483   548    3117      80
 3 Dirk Nowitzki   2004   605  1310    99   290   371   423    2915      77
 4 Dirk Nowitzki   2005   663  1445    91   228   615   708    3020      78
 5 Dirk Nowitzki   2006   751  1564   110   271   539   598    3086      81
 6 Dirk Nowitzki   2007   673  1341    72   173   498   551    2819      80
 7 Dirk Nowitzki   2008   630  1314    79   220   478   544    2769      81
 8 Dirk Nowitzki   2009   774  1616    61   170   485   545    3051      82
 9 Dirk Nowitzki   2010   720  1496    51   121   536   586    3041      82
10 Dirk Nowitzki   2011   610  1179    66   168   395   443    2505      82
11 Dirk Nowitzki   2012   473  1034    78   212   318   355    2078      66
12 Dirk Nowitzki   2013   332   707    63   151   164   191    1628      52
13 Dirk Nowitzki   2014   633  1273   131   329   338   376    2625      80
14 Dirk Nowitzki   2015   487  1062   104   274   255   289    2285      77
15 Dirk Nowitzki   2016   498  1112   126   342   250   280    2362      75
16 Dirk Nowitzki   2017   296   678    79   209    98   112    1421      54
17 Dirk Nowitzki   2018   346   758   138   337    97   108    1901      77
18 Dirk Nowitzki   2019   135   376    64   205    39    50     794      51</code></pre>
</div>
</div>
</section>
<section id="who-made-the-most-shots" class="level2">
<h2 class="anchored" data-anchor-id="who-made-the-most-shots">Who Made the Most Shots?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>season_box <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(dplyr<span class="sc">::</span><span class="fu">desc</span>(FGM)) <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Player, season, FGM, FGA, minutes, n_games) <span class="sc">|&gt;</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  Player                  season   FGM   FGA minutes n_games
  &lt;chr&gt;                    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;int&gt;
1 Kobe Bryant               2006   949  2109    3184      78
2 LeBron James              2006   875  1823    3361      82
3 Kobe Bryant               2003   868  1924    3401      82
4 Shai Gilgeous-Alexander   2025   868  1680    2633      77
5 LeBron James              2018   857  1580    3024      82</code></pre>
</div>
</div>
<p>. . .</p>
<ul>
<li>Is Kobe’s 2002-03 really the same as SGA’s 2024-25???</li>
</ul>
<p>. . .</p>
<ul>
<li>Arguably “best” should account for efficiency</li>
</ul>
</section>
<section id="field-goal-percentage" class="level2 scrollable">
<h2 class="scrollable anchored" data-anchor-id="field-goal-percentage">Field Goal Percentage</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>season_box <span class="ot">&lt;-</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  season_box <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">FGP =</span> <span class="fu">ifelse</span>(FGA <span class="sc">&gt;</span> <span class="dv">0</span>, FGM<span class="sc">/</span>FGA, <span class="cn">NA_real_</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">FGP Leaders</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Another Look</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Restricted Leaders</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>season_box <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(dplyr<span class="sc">::</span><span class="fu">desc</span>(FGP)) <span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Player, season, FGP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  Player           season   FGP
  &lt;chr&gt;             &lt;int&gt; &lt;dbl&gt;
1 Ahmad Caver        2022     1
2 Alondes Williams   2025     1
3 Andris Biedrins    2014     1
4 Anthony Brown      2018     1
5 Braxton Key        2023     1</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>season_box <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(dplyr<span class="sc">::</span><span class="fu">desc</span>(FGP)) <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Player, season, FGP, FGA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  Player           season   FGP   FGA
  &lt;chr&gt;             &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Ahmad Caver        2022     1     1
2 Alondes Williams   2025     1     2
3 Andris Biedrins    2014     1     1
4 Anthony Brown      2018     1     1
5 Braxton Key        2023     1     1</code></pre>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>season_box <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(FGA <span class="sc">&gt;=</span> <span class="dv">400</span>) <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(dplyr<span class="sc">::</span><span class="fu">desc</span>(FGP)) <span class="sc">|&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Player, season, FGP, FGA) <span class="sc">|&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  Player         season   FGP   FGA
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Daniel Gafford   2024 0.725   480
2 Walker Kessler   2023 0.720   414
3 DeAndre Jordan   2017 0.714   577
4 Rudy Gobert      2022 0.713   508
5 DeAndre Jordan   2015 0.710   534</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="effective-field-goal-percentage" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="effective-field-goal-percentage">Effective Field Goal Percentage</h2>
<ul>
<li>FGP is arguably a better measure of skill than FGM <strong>but</strong>
<ul>
<li>Extreme values for players w/ few attempts</li>
<li>Doesn’t distinguish 2- and 3-point shots</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li><span class="math inline">\(\textrm{eFGP} = (\textrm{FGM} + 0.5 \times \textrm{TPM})/\textrm{FGA}\)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>season_box <span class="ot">&lt;-</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  season_box <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">eFGP =</span> (FGM <span class="sc">+</span> <span class="fl">0.5</span> <span class="sc">*</span> TPM)<span class="sc">/</span>FGA) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Raw eFGP Leaders</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Restricted Leaders</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<ul>
<li>eFGP leaders are mostly centers who don’t shoot 3’s</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  Player         season  eFGP   FGP   TPA n_games
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt;
1 Daniel Gafford   2024 0.725 0.725     0      74
2 Walker Kessler   2023 0.721 0.720     3      74
3 DeAndre Jordan   2017 0.714 0.714     2      81
4 Rudy Gobert      2022 0.713 0.713     4      66
5 DeAndre Jordan   2015 0.711 0.710     4      82</code></pre>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<ul>
<li>We can restrict to players with <span class="math inline">\(\textrm{FGA} &gt; 400\)</span> and <span class="math inline">\(\textrm{TPA} &gt; 100\)</span></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  Player          season  eFGP   FGP   TPA n_games
  &lt;chr&gt;            &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt;
1 Kyle Korver       2015 0.671 0.487   449      75
2 Duncan Robinson   2020 0.667 0.470   606      73
3 Obi Toppin        2024 0.660 0.571   260      83
4 Nikola Jokic      2023 0.660 0.632   149      69
5 Joe Harris        2021 0.655 0.502   427      69</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="reflection" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="reflection">Reflection</h2>
<ul>
<li>eFGP is arguably better than FGP and FGM</li>
<li>But it is still highly variable</li>
</ul>
<p>. . .</p>
<ul>
<li>Refined question: instead of “who’s the best”, we can ask</li>
</ul>
<p>“what is the probability that a player makes a shot”</p>
<ul>
<li>Later: methods to estimate these probs. that
<ul>
<li>Account for contextual factors (e.g., shot location)</li>
<li>Produce stable estimates even w/ small sample sizes</li>
<li>Avoid imposing arbitrary cut-offs (e.g., <span class="math inline">\(\textrm{FGA} &gt; 400\)</span>)</li>
<li>Calibrate performance against transparent baselines (e.g., “above replacement”)</li>
</ul></li>
<li>Analytics involves <strong>motivating</strong> and <strong>justifying</strong> choices</li>
</ul>
</section>
</section>
<section id="more-course-logistics" class="level1">
<h1>More Course Logistics</h1>
<section id="requisites" class="level2">
<h2 class="anchored" data-anchor-id="requisites">Requisites</h2>
<ul>
<li>STAT 333 or 340
<ul>
<li>Random variables, expectations, probability</li>
<li>Fitting linear models &amp; interpreting outputs</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li>Prior experience with R
<ul>
<li>Assignment, scripting, loops, control flow</li>
<li>Saving objects, installing &amp; loading packages.</li>
<li>Data manipulation with <strong>dplyr</strong> and other <strong>tidyverse</strong> packages.</li>
<li>Creating visualizations</li>
</ul></li>
</ul>
</section>
<section id="course-website" class="level2">
<h2 class="anchored" data-anchor-id="course-website">Course Website</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="stat479_f25_qr.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="stat479_f25_qr.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></a></p>
</figure>
</div>
<p>Also <a href="https://canvas.wisc.edu/courses/476839">Canvas</a> &amp; <a href="https://canvas.wisc.edu/courses/476839">Piazza</a></p>
</section>
<section id="assignments-grading" class="level2">
<h2 class="anchored" data-anchor-id="assignments-grading">Assignments &amp; Grading</h2>
<ul>
<li>3 Group Projects (900 pts): Due on 10/10, 11/7, and 12/5
<ul>
<li>Written Report (100 pts) &amp; Presentation (100 pts)</li>
<li>Peer Reviews (60 pts)</li>
<li>Team Accountability Survey (40 pts)</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li>Participation (100 pts): Assessed holistically
<ul>
<li>Regularly attend lectures &amp; office hours</li>
<li>Contribute to Piazza discussions</li>
</ul></li>
</ul>
<p>. . .</p>
<ul>
<li>Final grade based on how many of the 1000 points earned</li>
</ul>
</section>
<section id="projects" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="projects">Projects</h2>
<ul>
<li>Work in groups of up to 4
<ul>
<li>Same groups for Projects 1 &amp; 2; can change for Project 3</li>
<li>Form groups by <strong>Friday September 12</strong></li>
<li>Use Piazza to find teammates &amp; sign up on Canvas</li>
</ul></li>
<li>Course projects can
<ul>
<li>Modify or extend analysis from lecture (e.g., to new sport)</li>
<li>Answer a new question not covered in lecture</li>
<li>…</li>
</ul></li>
<li>Ideally jump-start a portfolio that you can show teams</li>
</ul>
</section>
<section id="project-report" class="level2">
<h2 class="anchored" data-anchor-id="project-report">Project Report</h2>
<ul>
<li>Executive Summary:
<ul>
<li><strong>Non-technical</strong> overview of goals, methods, and results</li>
<li>Audience: front office executive, coach, or player</li>
</ul></li>
<li>Technical Report:
<ul>
<li>Include <em>all</em> code needed to reproduce findings</li>
<li>Tightly integrate code &amp; output w/ written exposition</li>
<li>Audience: fellow data scientists</li>
</ul></li>
</ul>
<p>. . .</p>
<p>I <strong>highly</strong> recommend using Quarto or RMarkdown</p>
</section>
<section id="project-presentation" class="level2">
<h2 class="anchored" data-anchor-id="project-presentation">Project Presentation</h2>
<ul>
<li>Record &amp; upload a 8–10 minute presentation</li>
<li>Every group member must speak</li>
</ul>
<p>. . .</p>
<ul>
<li>I’ll select 5-6 groups to present in-class on the last day (12/9)
<ul>
<li>Details to be announced</li>
<li>Presenting on the last day unrelated to course grades</li>
<li>But there’ll be prizes</li>
</ul></li>
</ul>
</section>
<section id="project-peer-review" class="level2">
<h2 class="anchored" data-anchor-id="project-peer-review">Project Peer Review</h2>
<ul>
<li>Provide feedback on 3 presentations &amp; 3 reports
<ul>
<li>Rubrics will be available</li>
<li>Fill out rubric + leave <em>constructive</em> comments</li>
</ul></li>
<li>Due 1 weeks after projects: 10/17, 11/14, and 12/12</li>
</ul>
</section>
<section id="team-accountability-survey" class="level2">
<h2 class="anchored" data-anchor-id="team-accountability-survey">Team Accountability Survey</h2>
<ul>
<li>Assign score from 0 (least) to 10 (most) for
<ul>
<li>Participation, Preparation, and Respectfulness</li>
</ul></li>
<li>Rate every group member (including yourself)</li>
<li>Ratings and comments will be kept anonymous</li>
<li>Course staff may give warnings for low peer score</li>
</ul>
</section>
</section>
<section id="topic-list" class="level1">
<h1>Topic List</h1>
<section id="unit-1-quantifying-performances" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="unit-1-quantifying-performances">Unit 1: Quantifying Performances</h2>
<ul>
<li>Expected vs actual performance</li>
<li>Value of a game state</li>
<li>Performance above “replacement” level</li>
<li>Case Studies:
<ul>
<li>Expected goals in soccer (Lectures 2 &amp; 3)</li>
<li>Adjusted plus/minus in the NBA (Lectures 4 &amp; 5)</li>
<li>Run expectancy &amp; WAR in baseball (Lectures 6–8)</li>
<li>WAR for the NFL (Lectures 9 &amp; 10)</li>
<li>Pitch Framing in baseball (Lecture 11)</li>
</ul></li>
</ul>
</section>
<section id="project-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="project-1">Project 1</h2>
<ul>
<li>Use box-score or play-by-play data</li>
<li>Introduce a new metric &amp; show it has favorable properties
<ul>
<li>Season-to-season stability</li>
<li>Ability to predict match- or season-level outcomes</li>
<li>Reveal new insight about player valuation</li>
</ul></li>
<li>Evaluate individual or team performance in a new sport
<ul>
<li>WAR for volleyball or college football?</li>
<li>Expected goals in hockey?</li>
</ul></li>
<li>Extend case study from lecture
<ul>
<li>Construct analogs for another sport</li>
<li>Examine season-to-season variability</li>
</ul></li>
<li>…</li>
</ul>
</section>
<section id="unit-2-rankings-simulation" class="level2">
<h2 class="anchored" data-anchor-id="unit-2-rankings-simulation">Unit 2: Rankings &amp; Simulation</h2>
<ul>
<li>Use models to <em>simulate</em> games, tournaments, drafts, etc.</li>
<li>Case Studies:
<ul>
<li>NCAA Volleyball &amp; Hockey Tournaments (Lectures 12 &amp; 13)</li>
<li>Markov chain simulations (Lecture 14 &amp; 15)</li>
<li>Building a consensus mock draft (Lecture 16)</li>
<li>Estimating impact of a rule change (Lecture 17)</li>
</ul></li>
</ul>
</section>
<section id="project-2" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="project-2">Project 2</h2>
<ul>
<li>Fit a model to estimate latent team- or player- strength</li>
<li>Use model estimates to simulate plays, games, tournaments, drafts, etc.</li>
<li>Compute probabilities based on simulation
<ul>
<li>Prob. of winning tournament or making it past 1st round</li>
<li>Prob. football drive ends in a touchdown</li>
<li>Prob. of winning a cricket test</li>
<li>Chance player available in 2nd round of draft</li>
</ul></li>
</ul>
</section>
<section id="unit-3-tracking-data" class="level2">
<h2 class="anchored" data-anchor-id="unit-3-tracking-data">Unit 3: Tracking Data</h2>
<ul>
<li>Currently the hottest area of sports analytics
<ul>
<li>Trackman + Statcast in baseball</li>
<li>NFL: player positions 10 times per second</li>
<li>Hawkeye for tennis, Hudl for soccer, …</li>
</ul></li>
<li>Tracking data opens up many possibilities
<ul>
<li>Incorporating spatial info. into prediction models</li>
<li>Creating new metrics using tracking data</li>
<li>Space ownership &amp; predicting trajectories</li>
</ul></li>
</ul>
</section>
<section id="project-3" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="project-3">Project 3</h2>
<ul>
<li><p>Analyze tracking data</p></li>
<li><p>NFL’s Big Data Bowl is a great opportunity</p>
<ul>
<li><strong>Best</strong> way into the field (even for non-football sports)</li>
<li>Cash prizes &amp; chance to present at Combine</li>
</ul></li>
<li><p>I highly encourage turning Project 3 into a BDB submission</p>
<ul>
<li>More info will be posted on Piazza</li>
<li>I’ll provide additional feedback/input for teams that do submit</li>
</ul></li>
</ul>
</section>
</section>
<section id="final-reminders" class="level1">
<h1>Final Reminders</h1>
<section id="course-expectations" class="level2">
<h2 class="anchored" data-anchor-id="course-expectations">Course Expectations</h2>
<ul>
<li><p>Respect diverse backgrounds</p>
<ul>
<li>Not everyone may know as much about a sport/method as You</li>
<li>You may not know as much about a sport/method as someone else</li>
</ul></li>
<li><p>Don’t hesitate to ask for and to provide help!</p></li>
<li><p>Take care of yourself &amp; each other</p></li>
</ul>
</section>
<section id="generative-ai-expectations-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="generative-ai-expectations-1">Generative AI Expectations 1</h2>
<ul>
<li>You have the right to the full benefit of my expertise and engagement in this course.</li>
<li>I will therefore <strong>never</strong> use AI to
<ul>
<li>To provide feedback on assignments</li>
<li>To prepare any course content (e.g., slides, code, assignment flavor-text, etc.)</li>
<li>To mediate or assist any communications with you</li>
</ul></li>
<li>Everything you see in the course was created by me without the aid of generative AI</li>
</ul>
</section>
<section id="generative-ai-expectations-2" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="generative-ai-expectations-2">Generative AI Expectations 2</h2>
<ul>
<li>A core theme of this class is <em>practice</em>
<ul>
<li>It is OK to make mistakes or not know an answer</li>
<li><em>Process</em> is more important than results</li>
</ul></li>
<li>Generative AI short-circuits the intended learning process</li>
<li>Its use is expressly prohibited</li>
</ul>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Peer Review
</div>
</div>
<div class="callout-body-container callout-body">
<p>Respect your classmates enough to review their projects yourself. Uploading someone else’s project report or presentation to a generative AI tool (e.g., for creating summaries) is forbidden and <strong>will result in a failing grade.</strong></p>
</div>
</div>
</section>
<section id="looking-ahead" class="level2">
<h2 class="anchored" data-anchor-id="looking-ahead">Looking Ahead</h2>
<ul>
<li>Lectures 2 &amp; 3: Expected Goals in Soccer</li>
<li>Will use public data provided by Hudl</li>
<li>Be sure to install the <strong>StatsBombR</strong> &amp; <strong>ranger</strong> packages</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"statsbomb/StatsBombR"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ranger"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
        for (let i=0; i<annoteTargets.length; i++) {
          const annoteTarget = annoteTargets[i];
          const targetCell = annoteTarget.getAttribute("data-target-cell");
          const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
          const contentFn = () => {
            const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
            if (content) {
              const tipContent = content.cloneNode(true);
              tipContent.classList.add("code-annotation-tip-content");
              return tipContent.outerHTML;
            }
          }
          const config = {
            allowHTML: true,
            content: contentFn,
            onShow: (instance) => {
              selectCodeLines(instance.reference);
              instance.reference.classList.add('code-annotation-active');
              window.tippy.hideAll();
            },
            onHide: (instance) => {
              unselectCodeLines();
              instance.reference.classList.remove('code-annotation-active');
            },
            maxWidth: 300,
            delay: [50, 0],
            duration: [200, 0],
            offset: [5, 10],
            arrow: true,
            appendTo: function(el) {
              return el.parentElement.parentElement.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'quarto',
            placement: 'right',
            popperOptions: {
              modifiers: [
              {
                name: 'flip',
                options: {
                  flipVariations: false, // true by default
                  allowedAutoPlacements: ['right'],
                  fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                },
              },
              {
                name: 'preventOverflow',
                options: {
                  mainAxis: false,
                  altAxis: false
                }
              }
              ]        
            }      
          };
          window.tippy(annoteTarget, config); 
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>